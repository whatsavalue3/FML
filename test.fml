local const u8* screen = 0xf800;

local const u8* ki = 0xf046;
local const u8* ko = 0xf040;

local u16 i = 0;
local u16 j = 0;

local const u8 bitmap[8] = [0x7f,0xc1,0x81,0x81,0x81,0x81,0x83,0xfe];

function u8 GetKey(u8 x, u8 y)
	*ki = 1<<x;
	return ((~*ko)&(1<<y));
end

local u8 res = 0;

function void main()
	while 1 do
		res = GetKey(0,0);
		i = 0;
		*cast(u8*)(0xF037) = 0x4;
		while 8 > i do
			*cast(u8*)(screen + (i<<5) + res) = bitmap[i];
			*cast(u8*)((screen + (i<<5)) + 1 + res) = bitmap[i];
			i = i + 1;
		end
		i = 0;
		*cast(u8*)(0xF037) = 0x0;
		while 8 > i do
			*cast(u8*)(screen + (i<<5) + res) = bitmap[i];
			*cast(u8*)((screen + (i<<5)) + 2 + res) = bitmap[i];
			i = i + 1;
		end
	end
end
